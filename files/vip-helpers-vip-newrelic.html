<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>VIP Go mu-plugins</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
            <script src="js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">VIP Go mu-plugins</a><span class="title-separator">/</span>mu-plugins</h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -four phpdocumentor-sidebar">
        
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="namespaces/automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="namespaces/automattic-wp.html"><abbr title="\Automattic\WP">WP</abbr></a></li>
                                            <li><a href="namespaces/automattic-vip.html"><abbr title="\Automattic\VIP">VIP</abbr></a></li>
                                    </ul>
                            <h4 class="phpdocumentor-sidebar__root-namespace"><a href="namespaces/tubalmartin.html"><abbr title="\tubalmartin">tubalmartin</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="namespaces/tubalmartin-cssmin.html"><abbr title="\tubalmartin\CssMin">CssMin</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="packages/VIP.html"><abbr title="\VIP">VIP</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="packages/a8c.html"><abbr title="\a8c">a8c</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="packages/a8c-Cron.html"><abbr title="\a8c\Cron">Cron</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="packages/Http.html"><abbr title="\Http">Http</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="packages/Http-Concat.html"><abbr title="\Http\Concat">Concat</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="packages/ES.html"><abbr title="\ES">ES</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="packages/ES-WP.html"><abbr title="\ES\WP">WP</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="packages/wp.html"><abbr title="\wp">wp</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="packages/wp-cli.html"><abbr title="\wp\cli">cli</abbr></a></li>
                            </ul>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="hooks/hooks.html">Hooks</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">vip-newrelic.php</h2>

            <p class="phpdocumentor-summary">These helper functions can be used inside your VIP code to modify how New Relic works on your site.</p>

    <section class="phpdocumentor-description"></section>








<h3 id="toc">
    Table of Contents
    <a href="#toc" class="headerlink"><i class="fas fa-link"></i></a>
</h3>

<dl class="phpdocumentor-table-of-contents">
                        <dt class="phpdocumentor-table-of-contents__entry -function -">
    <a href="namespaces/default.html#function_wpcom_vip_disable_new_relic_js">wpcom_vip_disable_new_relic_js()</a>
    <span>
                        &nbsp;: mixed    </span>
</dt>
<dd>Disable New Relic&#039;s browser metrics</dd>

            <dt class="phpdocumentor-table-of-contents__entry -function -">
    <a href="namespaces/default.html#function_wpcom_vip_add_uri_to_newrelic">wpcom_vip_add_uri_to_newrelic()</a>
    <span>
                        &nbsp;: mixed    </span>
</dt>
<dd>Add the exact URI to NewRelic tracking but only if we&#039;re not in the admin</dd>

            <dt class="phpdocumentor-table-of-contents__entry -function -">
    <a href="namespaces/default.html#function_wpcom_vip_cron_for_newrelic">wpcom_vip_cron_for_newrelic()</a>
    <span>
                        &nbsp;: mixed    </span>
</dt>
<dd>Name cron correctly in New Relic and do not count it as part of the Apdex score.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -function -">
    <a href="namespaces/default.html#function_wpcom_vip_wpcli_for_newrelic">wpcom_vip_wpcli_for_newrelic()</a>
    <span>
                        &nbsp;: mixed    </span>
</dt>
<dd>Name wp-cli correctly in New Relic and do not count it as part of the Apdex score</dd>

            <dt class="phpdocumentor-table-of-contents__entry -function -">
    <a href="namespaces/default.html#function_wpcom_vip_rest_routes_for_newrelic">wpcom_vip_rest_routes_for_newrelic()</a>
    <span>
                        &nbsp;: mixed    </span>
</dt>
<dd>Name wp-api requests correctly in New Relic</dd>

    </dl>



        

            <section class="phpdocumentor-functions">
        <h3 class="phpdocumentor-elements__header" id="functions">
            Functions
            <a href="files/vip-helpers-vip-newrelic.html#functions" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wpcom_vip_disable_new_relic_js">
        wpcom_vip_disable_new_relic_js()
        <a href="namespaces/default.html#function_wpcom_vip_disable_new_relic_js" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="vip-helpers/vip-newrelic.php"><a href="files/vip-helpers-vip-newrelic.html"><abbr title="vip-helpers/vip-newrelic.php">vip-newrelic.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">14</span>
</aside>

        <p class="phpdocumentor-summary">Disable New Relic&#039;s browser metrics</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wpcom_vip_disable_new_relic_js</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>Removes NR's JavaScript for tracking browser metrics, including page load times, Apdex score, and more.</p>
<p>Must be called at or before the <code class="prettyprint">template_redirect</code> action.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wpcom_vip_add_uri_to_newrelic">
        wpcom_vip_add_uri_to_newrelic()
        <a href="namespaces/default.html#function_wpcom_vip_add_uri_to_newrelic" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="vip-helpers/vip-newrelic.php"><a href="files/vip-helpers-vip-newrelic.html"><abbr title="vip-helpers/vip-newrelic.php">vip-newrelic.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">44</span>
</aside>

        <p class="phpdocumentor-summary">Add the exact URI to NewRelic tracking but only if we&#039;re not in the admin</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wpcom_vip_add_uri_to_newrelic</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wpcom_vip_cron_for_newrelic">
        wpcom_vip_cron_for_newrelic()
        <a href="namespaces/default.html#function_wpcom_vip_cron_for_newrelic" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="vip-helpers/vip-newrelic.php"><a href="files/vip-helpers-vip-newrelic.html"><abbr title="vip-helpers/vip-newrelic.php">vip-newrelic.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">58</span>
</aside>

        <p class="phpdocumentor-summary">Name cron correctly in New Relic and do not count it as part of the Apdex score.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wpcom_vip_cron_for_newrelic</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>We don't want to count cron as part of the apdex because it is not a user facing function and if cron tasks are slow it doesn't imply that the site's performance is impacted. Without removing these, long running cron tasks could flag the site as having performance problems, which would cause false positives in the monitoring.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wpcom_vip_wpcli_for_newrelic">
        wpcom_vip_wpcli_for_newrelic()
        <a href="namespaces/default.html#function_wpcom_vip_wpcli_for_newrelic" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="vip-helpers/vip-newrelic.php"><a href="files/vip-helpers-vip-newrelic.html"><abbr title="vip-helpers/vip-newrelic.php">vip-newrelic.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">77</span>
</aside>

        <p class="phpdocumentor-summary">Name wp-cli correctly in New Relic and do not count it as part of the Apdex score</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wpcom_vip_wpcli_for_newrelic</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>We don't want to count ongoing WP-CLI requests as part of the apdex because it is not a user facing function and if a WP-CLI request is slow it doesn't imply that the site's performance is impacted. Without removing these WP-CLI requests from the apdex calculation it could flag the site as having performance problems, which would cause false positives in the monitoring.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wpcom_vip_rest_routes_for_newrelic">
        wpcom_vip_rest_routes_for_newrelic()
        <a href="namespaces/default.html#function_wpcom_vip_rest_routes_for_newrelic" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="vip-helpers/vip-newrelic.php"><a href="files/vip-helpers-vip-newrelic.html"><abbr title="vip-helpers/vip-newrelic.php">vip-newrelic.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">111</span>
</aside>

        <p class="phpdocumentor-summary">Name wp-api requests correctly in New Relic</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wpcom_vip_rest_routes_for_newrelic</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$dispatch_results</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$request</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$route</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$handler</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>By default wp-api requests are tagged under index.php
We'd want to have them tagged with the proper rest route used.
While we are using the rest_dispatch_request filter, we're using it as an action without modifying the results.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$dispatch_results</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                
            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$request</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                
            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$route</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                
            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$handler</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                
            </dd>
            </dl>

    

    
</article>
            </section>

                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php

/**
 * These helper functions can be used inside your VIP code to modify how New Relic works on your site.
 */

/**
 * Disable New Relic&#039;s browser metrics
 *
 * Removes NR&#039;s JavaScript for tracking browser metrics, including page load times, Apdex score, and more.
 *
 * Must be called at or before the `template_redirect` action.
 */
function wpcom_vip_disable_new_relic_js() {
	if ( did_action( &#039;template_redirect&#039; ) &amp;&amp; ! doing_action( &#039;template_redirect&#039; ) ) {
		_doing_it_wrong( __FUNCTION__, &#039;New Relic&amp;#8217;s browser tracking can only be disabled at or before the `template_redirect` action.&#039;, &#039;1.0&#039; );
		return;
	}

	if ( function_exists( &#039;newrelic_disable_autorum&#039; ) ) {
		newrelic_disable_autorum();
	}
}


/**
 * The following functions are for platform level changes and should only be changed after consulting with WordPress VIP
 */

if ( extension_loaded( &#039;newrelic&#039; ) ){
	add_action( &#039;muplugins_loaded&#039;, &#039;wpcom_vip_add_uri_to_newrelic&#039; );
	// We are attaching this at muplugins_loaded because Cron-Control is loaded at muplugins_loaded priority 10
	add_action( &#039;muplugins_loaded&#039;, &#039;wpcom_vip_cron_for_newrelic&#039;, 11 );
	// We are attaching this at muplugins_loaded because Cron-Control is loaded at muplugins_loaded priority 10
	// This must be hooked later than wpcom_vip_cron_for_newrelic to allow values to be overwritten
	add_action( &#039;muplugins_loaded&#039;, &#039;wpcom_vip_wpcli_for_newrelic&#039;, 12 );
	add_action( &#039;rest_dispatch_request&#039;, &#039;wpcom_vip_rest_routes_for_newrelic&#039;, 10,4);
}


/**
 * Add the exact URI to NewRelic tracking but only if we&#039;re not in the admin
 */
function wpcom_vip_add_uri_to_newrelic() {
	if ( ! is_admin() &amp;&amp; function_exists( &#039;newrelic_add_custom_parameter&#039; ) ) {
		newrelic_capture_params();
		newrelic_add_custom_parameter( &#039;HTTP_REFERER&#039;, isset( $_SERVER[&#039;HTTP_REFERER&#039;] ) ? $_SERVER[&#039;HTTP_REFERER&#039;] : &#039;&#039; );
		newrelic_add_custom_parameter( &#039;HTTP_USER_AGENT&#039;, isset( $_SERVER[&#039;HTTP_USER_AGENT&#039;] ) ? $_SERVER[&#039;HTTP_USER_AGENT&#039;] : &#039;&#039; );
		newrelic_add_custom_parameter( &#039;HTTPS&#039;, is_ssl() );
	}
}

/**
 * Name cron correctly in New Relic and do not count it as part of the Apdex score.
 *
 * We don&#039;t want to count cron as part of the apdex because it is not a user facing function and if cron tasks are slow it doesn&#039;t imply that the site&#039;s performance is impacted. Without removing these, long running cron tasks could flag the site as having performance problems, which would cause false positives in the monitoring.
 */
function wpcom_vip_cron_for_newrelic() {
	if ( wp_doing_cron()
		&amp;&amp; function_exists( &#039;newrelic_name_transaction&#039; ) 
		&amp;&amp; function_exists( &#039;newrelic_background_job&#039; )
		&amp;&amp; function_exists( &#039;newrelic_ignore_apdex&#039; )
	   ) {
		newrelic_name_transaction( &#039;wp-cron&#039; );
		newrelic_background_job( true);
		// N.B. VIP Go sites execute cron events through WP CLI, so the event
		// can be determined in the New Relic &#039;wp-cli-cmd-args&#039; custom parameter
		newrelic_ignore_apdex();
	}
}

/**
 * Name wp-cli correctly in New Relic and do not count it as part of the Apdex score
 *
 * We don&#039;t want to count ongoing WP-CLI requests as part of the apdex because it is not a user facing function and if a WP-CLI request is slow it doesn&#039;t imply that the site&#039;s performance is impacted. Without removing these WP-CLI requests from the apdex calculation it could flag the site as having performance problems, which would cause false positives in the monitoring.
 */
function wpcom_vip_wpcli_for_newrelic() {
	if ( defined( &#039;WP_CLI&#039; )
	     &amp;&amp; WP_CLI
	     &amp;&amp; ! wp_doing_cron()  // Cron is going to be run via WP-CLI in the near term. We want to keep Cron and WP-CLI separated for better monitoring so we&#039;re not going to flag WP_CLI requests that are actually cron requests as WP-CLI.
	     &amp;&amp; function_exists( &#039;newrelic_ignore_apdex&#039; )
	     &amp;&amp; function_exists( &#039;newrelic_add_custom_parameter&#039; )
	     &amp;&amp; function_exists( &#039;newrelic_name_transaction&#039; ) ) {

		newrelic_name_transaction( &#039;wp-cli&#039; );

		$wp_cli_arguments = \WP_CLI::get_runner()-&gt;arguments;
		if ( empty( $wp_cli_arguments ) ) {
			// Not much to do at this point
			return;
		}
		if ( ! is_array( $wp_cli_arguments ) ) {
			$wp_cli_arguments = [ $wp_cli_arguments ];
		}
		array_unshift( $wp_cli_arguments, &#039;wp&#039; );
		$cmd = implode( &#039; &#039;, $wp_cli_arguments );
		// e.g. `wp option get siteurl`
		newrelic_add_custom_parameter( &#039;wp-cli-cmd&#039;, $cmd );

		newrelic_ignore_apdex();
	}
}

/**
 * Name wp-api requests correctly in New Relic
 *
 * By default wp-api requests are tagged under index.php
 * We&#039;d want to have them tagged with the proper rest route used.
 * While we are using the rest_dispatch_request filter, we&#039;re using it as an action without modifying the results.
 */
function wpcom_vip_rest_routes_for_newrelic( $dispatch_results, $request, $route, $handler ) {
	if ( function_exists( &#039;newrelic_add_custom_parameter&#039; )
	     &amp;&amp; function_exists( &#039;newrelic_name_transaction&#039; ) ) {
		newrelic_name_transaction( $route );
		newrelic_add_custom_parameter( &#039;wp-api&#039;, &#039;true&#039; );
		newrelic_add_custom_parameter( &#039;wp-api-route&#039;, $route );
	}
	return null; // Anything that&#039;s not null would be used as a response to the rest request which we don&#039;t want.
}
</code></pre>
            </article>
                <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
            </div>
        </div>
        <a href="files/vip-helpers-vip-newrelic.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
</body>
</html>
